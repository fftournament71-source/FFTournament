<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>Add Money</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            font-family: Arial;
            background: #f2f2f2;
            padding: 20px;
        }
        .box {
            max-width: 420px;
            background: #fff;
            padding: 25px;
            margin: auto;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        h2 {
            text-align: center;
            margin-bottom: 15px;
        }
        input, select {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 15px;
        }
        button {
            width: 100%;
            padding: 13px;
            background: #ff9800;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 17px;
            font-weight: bold;
            cursor: pointer;
        }
        .info {
            background: #fff3cd;
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>

<div class="box">
    <h2>üí∞ Add Money</h2>

    <div class="info">
        Bkash / Nagad ‡¶è ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶†‡¶ø‡ßü‡ßá Transaction ID ‡¶¶‡¶ø‡¶®
    </div>

    <input type="number" id="amount" placeholder="Amount (‡ß≥)">

    <select id="method">
        <option value="">Select Payment Method</option>
        <option value="Bkash">Bkash</option>
        <option value="Nagad">Nagad</option>
    </select>

    <input type="text" id="number" placeholder="Sender Mobile Number">
    <input type="text" id="txid" placeholder="Transaction ID">

    <button onclick="submitDeposit()">Submit Deposit</button>
</div>

<!-- üî• FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
/* üî¥ Firebase Config (‡¶®‡¶ø‡¶ú‡ßá‡¶∞‡¶ü‡¶æ ‡¶¨‡¶∏‡¶æ‡¶¨‡ßá) */
var firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "YOUR_PROJECT_ID"
};
firebase.initializeApp(firebaseConfig);
</script>

<script>
let user = JSON.parse(localStorage.getItem("loggedUser"));

if (!user) {
    alert("Please login first");
    window.location.href = "login.html";
}

function submitDeposit() {
    let amount = document.getElementById("amount").value;
    let method = document.getElementById("method").value;
    let number = document.getElementById("number").value;
    let txid   = document.getElementById("txid").value;

    if (!amount || !method || !number || !txid) {
        alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®");
        return;
    }

    let depositData = {
        email: user.email,
        amount: parseInt(amount),
        method: method,
        senderNumber: number,
        txid: txid,
        status: "pending",
        time: new Date().toLocaleString()
    };

    firebase.database().ref("depositRequests").push(depositData)
    .then(() => {
        alert("‚úÖ Deposit request sent to Admin!");
        window.location.href = "wallet.html";
    })
    .catch(err => {
        alert("‚ùå Error: " + err.message);
    });
}
</script>

</body>
</html>
