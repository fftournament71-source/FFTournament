<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Wallet</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#111;
    color:white;
    text-align:center;
}
.header{
    padding:15px;
    background:#222;
    font-size:20px;
}
.balance-box{
    margin:40px auto;
    width:90%;
    max-width:350px;
    background:#1e1e1e;
    padding:20px;
    border-radius:12px;
}
.balance{
    font-size:32px;
    color:#00ff99;
    margin:15px 0;
}
button{
    padding:12px 20px;
    font-size:16px;
    border:none;
    border-radius:8px;
    background:#ff9900;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="header">ðŸ’° My Wallet</div>

<div class="balance-box">
    <div>Current Balance</div>
    <div class="balance" id="balance">à§³0</div>
    <button onclick="addMoney()">Add à§³100</button>
</div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc, updateDoc, increment } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBKzB2v0xKe5_3FkOJ4lFct42qDa5IhhgU",
  authDomain: "free-fire-site.firebaseapp.com",
  projectId: "free-fire-site",
  storageBucket: "free-fire-site.firebasestorage.app",
  messagingSenderId: "1078452484864",
  appId: "1:1078452484864:web:5395a38a0c4181a3dcd1e5"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// demo user
const uid = "demo-user";
const walletRef = doc(db, "wallets", uid);

async function loadBalance(){
    const snap = await getDoc(walletRef);
    if(snap.exists()){
        document.getElementById("balance").innerText = "à§³" + snap.data().balance;
    }else{
        await setDoc(walletRef,{balance:0});
    }
}
loadBalance();

window.addMoney = async function(){
    await updateDoc(walletRef,{
        balance: increment(100)
    });
    loadBalance();
}
</script>

</body>
</html>
